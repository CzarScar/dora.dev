{{ define "main" }}

    <!-- TODO: #121 make a partial to process scss files and render <link> tags -->
    {{ $stylesheet := printf "scss/quickcheck.scss" | resources.Get | toCSS | fingerprint }}
    <link rel="stylesheet" href="{{ $stylesheet.RelPermalink }}" integrity="{{ $stylesheet.Data.Integrity }}">

    <h1 id="results_h1">Your software delivery&nbsp;performance</h1>
    {{- partial "quickcheck/percentile_graph" . -}}

    {{
        $tabs := (slice
                    (dict
                        "title" "Next steps"
                        "controls" "c_capabilities"
                    )
                    (dict
                        "title" "Performance comparison"
                        "controls" "c_compare"
                    )
        )
    }}
    <div x-data="{ tab: window.location.hash ? window.location.hash.substring(1) : 'c_compare' }">
       <span x-text="tab" style="color:red"></span>
        {{- partial "tab_navigation.v2" $tabs -}}

        <section id="c_capabilities" class="tab" x-show="tab == 'c_capabilities'">
            {{- partial "quickcheck/prioritize" . -}}
        </section>
        <section id="c_compare" class="tab" x-show="tab == 'c_compare'">
            {{- partial "quickcheck/performance_comparison" . -}}
        </section>
    </div>

    {{- partial "pagefooter_gofurther" . -}}

    {{- $helpers := resources.Get "js/helpers.js" -}}
    {{- $constants := resources.Get "js/constants.js" -}}
    {{- $results := resources.Get "js/results.js" -}}

    {{- $jsFiles := slice $helpers $constants $results}}
    {{- $jsBundle := $jsFiles | resources.Concat "js/quickcheck" | fingerprint -}}

    <script defer src="https://www.gstatic.com/charts/loader.js"></script>
    <script defer src="{{ $jsBundle.RelPermalink }}" integrity="{{ $jsBundle.Data.Integrity }}" defer></script>
    
{{ end }}