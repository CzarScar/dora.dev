{{ define "main" }}

<blockquote>DORA Core is a work in progress. Learn more, and provide feedback, in the [DORA Core GitHub Discussion](https://github.com/dora-team/dora.dev/discussions/265).</blockquote>

    <h1>DORA Core</h1>
    <p>DORA’s research program is continuous and ongoing; each year brings new avenues of inquiry, and each analysis yields new insights. At the cutting edge, new concepts are introduced frequently, and artifacts (especially the <a href='{{ relref . "/publications" }}'>Accelerate State of DevOps Reports</a> are continuously released, revealing new insights and dynamics. With each study, some prior findings are reinforced, while others may be called into question. This is a hallmark of good science: any new finding is to be considered suspect—intriguing, but suspect—until it has been validated through replication and application. Meanwhile, practitioners are encouraged to apply the research in their own professional contexts. In such contexts, it can be challenging to keep up with the latest developments from DORA: cultural transformation efforts in a large organization require a steady hand, persistent over stretches of time measured across multiple years. An attempt to update one’s practices to match the pace of the research can lead to counterproductive churn. In these contexts, it’s more practical to rely on “evergreen” artifacts. DORA Core represents a distillation of DORA’s most foundational findings: metrics, capabilities, and outcomes that the research has repeatedly surfaced. It enables teams to focus their improvement efforts even more precisely on what is likely to produce tangible benefits to their organizational goals and quality of life.</p>

    {{ $capabilities := where (where $.Site.RegularPages "Section" "devops-capabilities") "Params.core" true}}

    <div x-init="
        Alpine.store('coreModal',
            { open: false, 
                capabilitySlug: '',});

        let svg = document.getElementById('dora-core-model');

        svg.addEventListener('load', function() {
            var coreModelContentDocument = document.getElementById('dora-core-model').contentDocument;
        
            var capabilities = coreModelContentDocument.querySelectorAll('.entity');

            for (const item of capabilities) {
                // if modal content exists, add listener to open modal on click
                if ($refs[item.id]) {
                    item.classList.add('has-modal');
                    item.addEventListener('click', (el) => {
                        Alpine.store('coreModal').open = true;
                        Alpine.store('coreModal').capabilitySlug = item.id;
                        item.classList.add('clickedEntity');
                    });
                }
            }


            $watch('$store.coreModal.open', value => { if(!value) {
                coreModelContentDocument.querySelector('.entity.clickedEntity').classList.remove('clickedEntity'); 
                }
            });


         });

        ">
        
        <object data="dora-core-model.svg" id="dora-core-model" type="image/svg+xml" style="width:100%;border:1px solid #ddd;border-radius:.5em;"></object>

    <div x-cloak class="modal-container" x-show="$store.coreModal.open">
        <div x-cloak class="modal" x-show="$store.coreModal.open" @click.outside="$store.coreModal.open=false"
            x-on:keydown.escape.window="$store.coreModal.open=false" x-transition>

            <!-- TODO: each of these modals has two divs, each of which is activated/deactivated via `x-show`. Let's wrap each pair in a single div and show/hide that. -->

            <!-- loop across all items in `content/devops-capabilities` labeled 'core' and create content for the modal, based on the `summary` front matter -->
            {{ range $capabilities }}
                <div class="modal-header"
                    x-cloak 
                    x-show="$store.coreModal.capabilitySlug=='{{ .Slug }}'">
                    <h2>{{ .Title }}</h2>
                    <img class="modal-close-x" x-on:click="$store.coreModal.open=false" aria-controls="coreModal"
                        src="https://fonts.gstatic.com/s/i/short-term/release/googlesymbols/close/default/48px.svg"
                        alt="close">
                </div>
                <div class="capability-content"
                    x-ref="{{ .Slug }}"
                    x-cloak 
                    x-show="$store.coreModal.capabilitySlug=='{{ .Slug }}'"
                    data-title="{{ .Page.Title }}">
                    <p>{{ .Page.Params.summary | markdownify }}</p>
                    <p><a href="{{ .Page.RelPermalink }}">Learn more about {{ .Page.Title }}</a></p>
                </div>
            {{ end }}

            <!-- there are also a few pieces of modal content which are not (currently) represented in `devops-capabilities`. Hard-code them: -->
            <div class="modal-header"
                x-cloak 
                x-show="$store.coreModal.capabilitySlug=='deployment-pain'">
                <h2>Deployment pain</h2>
                <img class="modal-close-x" x-on:click="$store.coreModal.open=false" aria-controls="coreModal"
                    src="https://fonts.gstatic.com/s/i/short-term/release/googlesymbols/close/default/48px.svg"
                    alt="close">
            </div>
            <div class="capability-content"
                x-ref="deployment-pain"
                x-cloak 
                x-show="$store.coreModal.capabilitySlug=='deployment-pain'"
                data-title="Deployment pain">

                {{- partial "core/outcome-deployment-pain" . -}}
            </div>

            <div class="modal-header"
                x-cloak 
                x-show="$store.coreModal.capabilitySlug=='rework'">
                <h2>Rework</h2>
                <img class="modal-close-x" x-on:click="$store.coreModal.open=false" aria-controls="coreModal"
                    src="https://fonts.gstatic.com/s/i/short-term/release/googlesymbols/close/default/48px.svg"
                    alt="close">
            </div>
            <div class="capability-content"
                x-ref="rework"
                x-cloak 
                x-show="$store.coreModal.capabilitySlug=='rework'"
                data-title="Deployment pain">

                {{- partial "core/outcome-rework" . -}}
            </div>

            <div class="modal-header"
                x-cloak 
                x-show="$store.coreModal.capabilitySlug=='burnout'">
                <h2>Burnout</h2>
                <img class="modal-close-x" x-on:click="$store.coreModal.open=false" aria-controls="coreModal"
                    src="https://fonts.gstatic.com/s/i/short-term/release/googlesymbols/close/default/48px.svg"
                    alt="close">
            </div>
            <div class="capability-content"
                x-ref="burnout"
                x-cloak 
                x-show="$store.coreModal.capabilitySlug=='burnout'"
                data-title="Deployment pain">

                {{- partial "core/outcome-burnout" . -}}
            </div>

        </div>
    </div>

    > [Download as PDF](dora-core-model.pdf)
</div>

    {{ .Content }}



{{ end }}